{% extends 'layout.html' %}  

{% block body %}
    <form action="/post" method="POST">
        <h1>Welcome {{username}}</h1> 
        <div class = "well">
            <ul class="list-inline">
                <li class="list-inline-item">
                    <a href="/changePassword">Change Password</a>
                </li>
                <li class="list-inline-item">
                    <a href="/changeUsername">Change Username</a>
                </li>
            </ul>
        </div>
        <input type="text" class = "form-control" name = "content_name" placeholder="post" required/>
        </br>
        <br />
        <label><input type ="checkbox" name = "p_status"/> Private </label> <br>
        <input type="submit" class="btn btn-primary" value = Post />
    </form>


    <style type="text/css">
        table, th, td{
            margin-top: 1cm;
        }
    </style>

    <h2>Posts You Created</h2>
    <table class = "table">
        <!--Table head-->
        <thead class="blue-grey lighten-4">
            <tr>
                <th>Time</th>
                <th>Post</th>
                <th>Tag</th>
                <th>Comment</th>
            </tr>
        </thead>
        {% for line in posts %}
            <tr>
                <td>{{line.timest}}</td>
                <td>{{line.content_name}}</td>
                <td>
<!--                    <input type="button" onclick="showTags();" value="Click" />-->
                    <div id="showtags">
                        {% for tag in tags %}
                            {% if line.id == tag.id %}
                                <p>{{tag.first_name}} {{tag.last_name}} ({{tag.username_taggee}})</p>
                            {% endif %}
                        {% endfor %}
                    </div>
                    
                    <br/>
                    
                    <form action="/tag" method="POST">
                        <input type="hidden" name="contentID" value="{{line.id}}">
                        <input type="text" name="taggee" placeholder="Username">
                        <button type="submit">Tag</button>
                    </form>
                </td>
                <td>
<!--                    <input type="button" onclick="showComments();" value="Click" />-->
                    <div id="showcomments">
                        {% for com in comments %} 
                            {% if line.id == com.id %}
                                <p>{{com.timest}}: {{com.username}}: {{com.comment_text}}</p>
                            {% endif %}
                        {% endfor %}
                    </div>
                    
                    <form action="/comment" method="POST">
                        <input type="hidden" name="commentID" value="{{line.id}}">
                        <input type="text" name="comment" placeholder="Comment">
                        <button type="submit">Add</button>
                    </form>
                </td>
            </tr>
        {% endfor %}
    </table>

    <br />
    <h2>Posts You Are Tagged In</h2>
    <table class = "table">
        <!--Table head-->
        <thead class="blue-grey lighten-4">
            <tr>
                <th>Time</th>
                <th>Post</th>
                <th>Tag</th>
                <th>Comment</th>
            </tr>
        </thead>
        {% for line in taggedposts %}
            <tr>
                <td>{{line.timest}}</td>
                <td>{{line.content_name}}</td>
                <td>
<!--                    <input type="button" onclick="showTags();" value="Click" />-->
                    <div id="showtags">
                        {% for tag in tags %}
                            {% if line.id == tag.id %}
                                <p>{{tag.first_name}} {{tag.last_name}} ({{tag.username_taggee}})</p>
                            {% endif %}
                        {% endfor %}
                    </div>
                    
                    <br/>
                    
                    <form action="/tag" method="POST">
                        <input type="hidden" name="contentID" value="{{line.id}}">
                        <input type="text" name="taggee" placeholder="Username">
                        <button type="submit">Tag</button>
                    </form>
                </td>
                <td>
<!--                    <input type="button" onclick="showComments();" value="Click" />-->
                    <div id="showcomments">
                        {% for com in comments %} 
                            {% if line.id == com.id %}
                                <p>{{com.timest}}: {{com.username}}: {{com.comment_text}}</p>
                            {% endif %}
                        {% endfor %}
                    </div>
                    
                    <form action="/comment" method="POST">
                        <input type="hidden" name="commentID" value="{{line.id}}">
                        <input type="text" name="comment" placeholder="Comment">
                        <button type="submit">Add</button>
                    </form>
                </td>
            </tr>
        {% endfor %}
    </table>
{% endblock %}
